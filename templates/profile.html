{% extends "client_layout.html" %}
{% block main %}
    <div class="jumbotron jumbotron-fluid" style='text-align: left !important;'>
        <div class="container text-success">
            <h1 class="display-4"><em>E - Medicals</em></h1>
            <p class="lead">This is your online work environment..</p>
        </div>
    </div>
    <div class="container formcard" id="profile" style="display: block;">         
        <div class="profile">
            <div style="text-align: center;">
                <img src="{{ url_for('static',filename=row[0]['photo'])}}" style="border-radius: 50%;" width="160" height="160" >
            </div>
            <div class="text-success" style="text-align: center;"> 
                <p>@{{ user[0].user_id }}</p>   
                {% if user[0].type == 'pat' %}
                    <p>PATIENT</p>
                {% else %}
                    <p>DOCTOR</p>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 text-success">
                <p>Name</p>
                <p>Email</p>
                <p>Sex</p>
                <p>Address</p>
                <p>Phone Number</p>
                <p>Date of Birth</p>
                <p>Marital Status</p>
                <p>State</p>
            </div>           
            <div class="col-md-8 text-secondary">
                {%if user[0].type == 'doc' %}
                <p>Dr. {{ row[0].f_name }} {{ row[0].l_name }}</p>
                {% else %}
                <p>{{ row[0].f_name }} {{ row[0].l_name }}</p>
                {% endif %}
                <p>{{ user[0].email }}</p>
                <p>{{ row[0].sex }}</p>
                <p>{{ row[0].location }}</p>
                <p>{{ row[0].phone }}</p>
                <p>{{ row[0].dob }}</p>
                <p>{{ row[0].m_stat }}</p>
                <p>{{ row[0].state }}</p>
            </div>
        </div> 
        <button class="btn btn-success" id="update">Update profile</button>           
    </div>
    <div class="container formcard" style="display: none;" id="show">
        <h3>Update your profile</h3>
        <form action="/update" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" name="email" class="form-control" value={{user[0].email}} required>
            </div>
            <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="pass" name="password" class="form-control" placeholder="New password">
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="text" name="num" class="form-control" value={{row[0].phone}} required>
            </div>
            <div class="form-group">
                <label for="marital">Marital status</label>
                <select class="custom-select" name="mstat" required>
                    {%if row[0].m_stat == "married" %}
                    <option value={{row[0].m_stat}}>{{row[0].m_stat}}</option>
                    <option value="single">single</option>
                    <option value="divorce">divorce</option>
                    {%elif row[0].m_stat == "single" %}
                    <option value={{row[0].m_stat}}>{{row[0].m_stat}}</option>
                    <option value="married">married</option>
                    <option value="divorce">divorce</option>
                    {%else%}
                    <option value={{row[0].m_stat}}>{{row[0].m_stat}}</option>
                    <option value="single">single</option>
                    <option value="married">married</option>
                    {%endif%}
                </select>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" name="loc" class="form-control" value={{row[0].location}} required>
            </div>
            <div class="form-group">
                <label for="picture">Picture Upload</label>
                <input type="file" name="picture" class="form-control" value={{row[0]['photo']}}>
            </div>
            <input type="submit" value="Update" class="btn btn-success">
            <input type="button" value="Cancel" class="btn btn-danger" id="cancel">
            <span>{{err}}</span>
        </form>
    </div>    
    <script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    
{% endblock %}